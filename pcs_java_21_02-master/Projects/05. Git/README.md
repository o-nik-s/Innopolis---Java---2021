# Система контроля версий Git

* Позволяет изолировать разработку внутри команды для каждого разработчика.

* Позволяет вести групповую разработку.

* Позволяет отслеживать все изменения каждым разработчиком.

* Распределенная система контроля версий Git - принцип один, но сервисы разные: Github, Gitlab, Bitbucket. 

## Определения 

* Удаленный репозиторий - хранилище вашего кода, размещенное на удаленном сервере.

* Локальный репозиторий - хранилище кода, полная копия удаленного репозитория, но хранится на вашем компьютере.

* Коммит - центральное определение систем контроля версий. Коммит - это фиксация какого-либо изменения, имеет свой хэш (идентификатор) и комментарий.

* Конфликт - ситуация, когда одни изменения противоречат другим. Конфликты устраняются вручную.

```
<<<<<<< HEAD
		int d = 100; // ваша версия
=======
		int z = scanner.nextInt(); // версия из удаленного репозитория
>>>>>>> e04c9a854ad2e5c29b886e19d016d9eb8c9b71a0
```

## Команды Linux

* `cd имя_папки` - переход в нужную папку

* `ls` - показывает содержимое текущей папки

* `mkdir имя_папки` - создает папку с заданным названием

* `mv имя_папки1 имя_папки2` - выполняет переименование папки1 в папку2.

* `touch имя_файла` - создает новый файл.

* `.gitignore` - файл, в котором перечислены расширения и названия файлов и папок, которые git должен игнорировать. Это, как правило, бинарные файлы, а также служебные файлы.

## Работа с репозиториями

1. Скачать Git-клиент (Git-bash).

2. Выполнить команды для конфигурации Git

```
git config --global user.name "Sidikov Marsel"
git config --global user.email "sidikov.marsel@gmail.com"
```

3. Выбрать папку на компьютере, где будет хранится локальный репозиторий.

```
cd Desktop
```

4. Делаем клон удаленного репозитория

```
git clone URL_удаленного репозитория
```

5. Работаем в репозитории (пишем код).

6. Проверяем состояние нашего репозитория:

```
git status
```

* Если файл красный (`untracked`), то его изменения не отслеживаются git-ом.

* Если файл красный (`modified`), то последние изменения (добавленные после `git add`) не отслеживаются.

7. Добавляем файлы для отслеживания

```
git add Program.java
```

8. Создаем коммит

```
git commit -m 'add Program.java'
```

* В коммит попадают изменения, которые были зафиксированы через `git add`

* Коммит может содрежать изменения в нескольких файлах.

9. Отправляем изменения на сервер

```
git push
```

## Дополнительные команды

Можно проверять разницу между последним коммитом и текущими изменениями с помощью:

```
git diff имя_файла
```

Можно посмотреть историю коммитов:

```
git log
```

Можно изменить комментарий к последнему локальному коммиту с помощью:

```
git commit --amend
```

Обновить изменения в локальном репозитории изменениями в удаленном репозитории можно с помощью команды:

```
git pull
```

## Разные ситуации при работе нескольких разработчиков:

### Ситуация 1

1. Первый разрботчик внес изменения в файл, но не сделал коммит и не сделал push. 

2. Второй разработчик внес изменения в этот же файл, но сделал коммит и сделал push.

3. Теперь первый разработчик делает коммит и делает push. 

4. Gitlab не дает сделать push, а требует, чтобы вы сначала сделали pull.

Результат:

а) Все прошло хорошо.
б) все прошло плохо - вы получили конфликт

### Ситуация 2

1. Первый разрботчик внес изменения в файл, но не сделал коммит и не сделал push. 

2. Второй разработчик внес изменения в этот же файл, но сделал коммит и сделал push.

3. Теперь первый разработчик делает pull.

Результат:

Git не дает обновится, пока вы не закоммитите свои изменения.

## Итог

1. Перед тем как работать, всегда делайте `git pull`. 
2. Каждый программист в иделает должен работать только над своей задачей и не трогать код другого.

### ДЗ в стиле Git Flow


![Git flow](img/Branches.svg)

1. Создаем ветки `main/develop`.

2. Для каждой ДЗ создаем отдельную ветку, называя `homework/номер_название`

3. Каждую ДЗ делаем в отдельной ветке.

4. Как только доделали ДЗ, заливаем ветку на удаленный сервер и сливаем с develop. Получаем ссылку на создание merge-request, передаем ее наставнику.